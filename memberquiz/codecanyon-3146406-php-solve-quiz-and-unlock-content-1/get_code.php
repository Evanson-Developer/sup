<?php
{include}
{sql_replace}
$rs_resulti = execute($sqli);
$rsi = mysql_fetch_array($rs_resulti);
if($rsi['status']){
?>
 <script type="text/javascript">  
   //if (typeof jQuery == 'undefined') {
      document.write('<link rel="stylesheet" type="text/css" href="'
     + '<?php echo path_abs_sfw?>/css/style_quiz.css" />'); 
   //}
 </script> 
 <script type="text/javascript">  
   if (typeof jQuery == 'undefined') {
      document.write('<script type="text/javascript" src="'
     + 'http://code.jquery.com/jquery-latest.min.js"></scr' + 'ipt>'); 
   }
 </script>
 <script type="text/javascript">
 if(!jQuery().validate) {
/************************************ JQUERY VALIDATE ****************************/
/**
 * jQuery Validation Plugin 1.9.0
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2011 JÃ¶rn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
  ;(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){var d=this.find("input, button");d.filter(".cancel").click(function(){c.cancelSubmit=true});if(c.settings.submitHandler){d.filter(":submit").click(function(){c.submitButton=this})}this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton){var b=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm);if(c.submitButton){b.remove()}return false}return true}if(c.settings.debug)b.preventDefault();if(c.cancelSubmit){c.cancelSubmit=false;return d()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return d()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var b=true;var c=a(this[0].form).validate();this.each(function(){b&=c.element(this)});return b}},removeAttrs:function(b){var c={},d=this;a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings;var f=e.rules;var g=a.validator.staticRules(d);switch(b){case"add":a.extend(g,a.validator.normalizeRule(c));f[d.name]=g;if(c.messages)e.messages[d.name]=a.extend(e.messages[d.name],c.messages);break;case"remove":if(!c){delete f[d.name];return g}var h={};a.each(c.split(/\s/),function(a,b){h[b]=g[b];delete g[b]});return h}}var i=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d);if(i.required){var j=i.required;delete i.required;i=a.extend({required:j},i)}return i}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length==1)return function(){var c=a.makeArray(arguments);c.unshift(b);return a.validator.format.apply(this,c)};if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),c)});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(a,b){this.lastActive=a;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(a)).hide()}},onfocusout:function(a,b){if(!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))){this.element(a)}},onkeyup:function(a,b){if(a.name in this.submitted||a==this.lastElement){this.element(a)}},onclick:function(a,b){if(a.name in this.submitted)this.element(a);else if(a.parentNode.name in this.submitted)this.element(a.parentNode)},highlight:function(b,c,d){if(b.type==="radio"){this.findByName(b.name).addClass(c).removeClass(d)}else{a(b).addClass(c).removeClass(d)}},unhighlight:function(b,c,d){if(b.type==="radio"){this.findByName(b.name).removeClass(c).addClass(d)}else{a(b).removeClass(c).addClass(d)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"<br/>This field is required.",remote:"<br/>Please fix this field.",email:"<br/>Please enter a valid email address.",website:"<br/>Wrong web site.",websitehttp:"<br/>Wrong web site.",cod_fisc:"",p_iva:"",url:"<br/>Please enter a valid URL.",equalTo:"<br/>Please enter the same value again.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"<br/>Only numbers",digits:"",data:"<br/>Wrong date",creditcard:"",accept:"Please enter a value with a valid extension.",ora:"",no_space:"",maxlength:a.validator.format("<br/>Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("<br/>Please enter a value between {0} and {1} characters long."),range:a.validator.format("<br/>Please enter a value between {0} and {1}."),max:a.validator.format("<br/>Please enter a value less than or equal to {0}."),min:a.validator.format("<br/>Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){function d(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=this.groups={};a.each(this.settings.groups,function(c,d){a.each(d.split(/\s/),function(a,d){b[d]=c})});var c=this.settings.rules;a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)});a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, "+"[type='number'], [type='search'] ,[type='tel'], [type='url'], "+"[type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], "+"[type='range'], [type='color'] ","focusin focusout keyup",d).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",d);if(this.settings.invalidHandler)a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid())a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++){this.check(b[a])}return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b));this.lastElement=b;this.prepareElement(b);this.currentElements=a(b);var c=this.check(b);if(c){delete this.invalid[b.name]}else{this.invalid[b.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return c},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b){this.errorList.push({message:b[c],element:this.findByName(c)[0]})}this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){if(a.fn.resetForm)a(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(var c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(a){return a.element.name==b.name}).length==1&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in c||!b.objectLength(a(this).rules()))return false;c[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(b){b=this.validationTargetFor(this.clean(b));var c=a(b).rules();var d=false;for(var e in c){var f={method:e,parameters:c[e]};try{var g=a.validator.methods[e].call(this,b.value.replace(/\r/g,""),b,f.parameters);if(g=="dependency-mismatch"){d=true;continue}d=false;if(g=="pending"){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!g){this.formatAndAdd(b,f);return false}}catch(h){this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+f.method+"' method",h);throw h}}if(d)return;if(this.objectLength(c))this.successList.push(b);return true},customMetaMessage:function(b,c){if(!a.metadata)return;var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++){if(arguments[a]!==undefined)return arguments[a]}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;if(typeof c=="function"){c=c.call(this,b.parameters,a)}else if(d.test(c)){c=jQuery.format(c.replace(d,"{$1}"),b.parameters)}this.errorList.push({message:c,element:a});this.errorMap[a.name]=c;this.submitted[a.name]=c},addWrapper:function(a){if(this.settings.wrapper)a=a.add(a.parent(this.settings.wrapper));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(var a=0;this.successList[a];a++){this.showLabel(this.successList[a])}}if(this.settings.unhighlight){for(var a=0,c=this.validElements();c[a];a++){this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);if(d.length){d.removeClass(this.settings.validClass).addClass(this.settings.errorClass);d.attr("generated")&&d.html(c)}else{d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:true}).addClass(this.settings.errorClass).html(c||"");if(this.settings.wrapper){d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(d).length)this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b)}if(!c&&this.settings.success){d.text("");typeof this.settings.success=="string"?d.addClass(this.settings.success):this.settings.success(d)}this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){if(this.checkable(a)){a=this.findByName(a.name).not(this.settings.ignore)[0]}return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):true},dependTypes:{"boolean":function(a,b){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[b.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},website:{website:true},websitehttp:{websitehttp:true},cod_fisc:{cod_fisc:true},p_iva:{p_iva:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},data:{data:true},ora:{ora:true},creditcard:{creditcard:true},no_space:{no_space:true}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={};var d=a(b).attr("class");d&&a.each(d.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(c,a.validator.classRuleSettings[this])}});return c},attributeRules:function(b){var c={};var d=a(b);for(var e in a.validator.methods){var f;if(e==="required"&&typeof a.fn.prop==="function"){f=d.prop(e)}else{f=d.attr(e)}if(f){c[e]=f}else if(d[0].getAttribute("type")===e){c[e]=true}}if(c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)){delete c.maxlength}return c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={};var d=a.data(b.form,"validator");if(d.settings.rules){c=a.validator.normalizeRule(d.settings.rules[b.name])||{}}return c},normalizeRules:function(b,c){a.each(b,function(d,e){if(e===false){delete b[d];return}if(e.param||e.depends){var f=true;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c);break}if(f){b[d]=e.param!==undefined?e.param:true}else{delete b[d]}}});a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e});a.each(["minlength","maxlength","min","max"],function(){if(b[this]){b[this]=Number(b[this])}});a.each(["rangelength","range"],function(){if(b[this]){b[this]=[Number(b[this][0]),Number(b[this][1])]}});if(a.validator.autoCreateRanges){if(b.min&&b.max){b.range=[b.min,b.max];delete b.min;delete b.max}if(b.minlength&&b.maxlength){b.rangelength=[b.minlength,b.maxlength];delete b.minlength;delete b.maxlength}}if(b.messages){delete b.messages}return b},normalizeRule:function(b){if(typeof b=="string"){var c={};a.each(b.split(/\s/),function(){c[this]=true});b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c;a.validator.messages[b]=d!=undefined?d:a.validator.messages[b];if(c.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case"select":var e=a(c).val();return e&&e.length>0;case"input":if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);if(!this.settings.messages[c.name])this.settings.messages[c.name]={};e.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=e.message;d=typeof d=="string"&&{url:d}||d;if(this.pending[c.name]){return"pending"}if(e.old===b){return e.valid}e.old=b;var f=this;this.startRequest(c);var g={};g[c.name]=b;a.ajax(a.extend(true,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===true;if(g){var h=f.formSubmitted;f.prepareElement(c);f.formSubmitted=h;f.successList.push(c);f.showErrors()}else{var i={};var j=d||f.defaultMessage(c,"remote");i[c.name]=e.message=a.isFunction(j)?j(b):j;f.showErrors(i)}e.valid=g;f.stopRequest(c,g)}},d));return"pending"},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){var e=this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},data:function(a,b){return this.optional(b)||/^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/.test(a)||/^([\__]+)([\/]+)([\__]+)([\/]+)([\____]+)$/.test(a)},ora:function(a,b){return this.optional(b)||/^(([0-1]?[0-9])|([2][0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$/.test(a)||/^([\__]+)([\:]+)([\__]+)$/.test(a)},website:function(a,b){return this.optional(b)||/^((http|https):\/\/(www\.)?|www\.)[a-zA-Z0-9\_\-]+\.([a-zA-Z]{2,4}|[a-zA-Z]{2}\.[a-zA-Z]{2})(\/[a-zA-Z0-9\-\._\?\&=,'\+%\$#~]*)*$/.test(a)},websitehttp:function(a,b){return this.optional(b)||/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?$/.test(a)},cod_fisc:function(a,b){return this.optional(b)||/^[A-Za-z]{6}[0-9LMNPQRSTUV]{2}[A-Za-z]{1}[0-9LMNPQRSTUV]{2}[A-Za-z]{1}[0-9LMNPQRSTUV]{3}[A -Za-z]{1}$/.test(a)},p_iva:function(a,b){return this.optional(b)||/^\d{5}\d{6}$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return false;var c=0,d=0,e=false;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--){var g=a.charAt(f);var d=parseInt(g,10);if(e){if((d*=2)>9)d-=9}c+=d;e=!e}return c%10==0},no_space:function(a,b){return this.optional(b)||/^\S+$/i.test(a)},accept:function(a,b,c){c=typeof c=="string"?c.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(new RegExp(".("+c+")$","i"))},equalTo:function(b,c,d){var e=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return b==e.val()}}});a.format=a.validator.format})(jQuery);(function(a){var b={};if(a.ajaxPrefilter){a.ajaxPrefilter(function(a,c,d){var e=a.port;if(a.mode=="abort"){if(b[e]){b[e].abort()}b[e]=d}})}else{var c=a.ajax;a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;if(e=="abort"){if(b[f]){b[f].abort()}return b[f]=c.apply(this,arguments)}return c.apply(this,arguments)}}})(jQuery);(function(a){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){a.each({focus:"focusin",blur:"focusout"},function(b,c){function d(b){b=a.event.fix(b);b.type=c;return a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(b,d,true)},teardown:function(){this.removeEventListener(b,d,true)},handler:function(b){arguments[0]=a.event.fix(b);arguments[0].type=c;return a.event.handle.apply(this,arguments)}}})}a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);if(e.is(b)){return d.apply(e,arguments)}})}})})(jQuery)
 }
 </script> 
 <script type="text/javascript">
 if(!jQuery().StepizeForm) {
  ;(function(a){function b(a,b){var c=a.offset().left-b.offset().left;c=c-(b.outerWidth()-b.innerWidth())/2;return c}function c(c,e){e.find(c).each(function(c){if(b(a(this),a(this).closest(e))==0){d=c}});return d}function e(d,e,f,g,h){if(g=="next"){np="-="+e.outerWidth(true)}else{np="+="+e.outerWidth(true)}e.each(function(i){i++;var j=i+1;var k=i-1;if(b(a(this),a(this).closest(f))==0){if(g=="next"){f.animate({height:e.eq(c(e,f)).next(e).height()+"px"},200,function(){d.animate({left:np},200,function(){e.eq(c(e,f)).find("input:first").focus();a('[rel_form="'+f.attr("id")+'"][rel^="fstep_"]').removeClass(h);a('[rel_form="'+f.attr("id")+'"][rel="fstep_'+j+'"]').addClass(h)})})}else{f.animate({height:a(this).prev(e).height()+"px"},200,function(){d.animate({left:np},200,function(){e.eq(c(e,f)).find("input:first").focus();a('[rel_form="'+f.attr("id")+'"][rel^="fstep_"]').removeClass(h);a('[rel_form="'+f.attr("id")+'"][rel="fstep_'+k+'"]').addClass(h)})})}}})}var f={init:function(d){var f={Text_Next:"Next",Text_Prev:"Prev",Text_Submit:"Submit",Class_Prev:"myButton",Class_Next:"myButton",Class_Submit:"myButton",Class_Highlight:"step_highlight"};var d=a.extend(f,d);var g=d,h=a(this),i=h.find('[id*="fstep_"]:visible');i.wrapAll('<div class="container_steps" style="position:relative" />').append('<div style="clear:both"></div>');h.wrap('<div class="container_form" />');var j=h.find(".container_steps"),k=h.closest(".container_form");if(h.find('[id*="fstep_"]').legth==1){k.append('<span type="submit" class="fsubmit '+g.Class_Submit+'">'+g.Text_Submit+'</span><div class="er_choose">You must choose at least one answer for each Question</div>')}else{k.append('<span type="button" class="fprev '+g.Class_Prev+'" style="display:none">'+g.Text_Prev+"</span>"+'<span type="button" class="fnext '+g.Class_Next+'">'+g.Text_Next+"</span>"+'<span type="submit" class="fsubmit '+g.Class_Submit+'" style="display:none">'+g.Text_Submit+'</span><div class="er_choose">You must choose at least one answer</div>')}var l=k.find(".fnext"),m=k.find(".fprev"),n=k.find(".fsubmit");h.find("button:submit,input:submit").remove();h.css({height:h.find('[id^="fstep_"]:first').height()+"px",overflow:"hidden",width:h.outerWidth(true),border:"none",padding:"0px",margin:"0px"});h.closest(".container_form").css({overflow:"hidden",width:"100%",position:"relative"});i.css({width:h.outerWidth(true),overflow:"auto",border:"none",padding:"0px",margin:"0px","float":"left"});j.css({width:h.outerWidth(true)*i.length+"px",border:"none",padding:"0px",margin:"0px"});a('[rel_form="'+h.attr("id")+'"]:first').addClass(g.Class_Highlight);if(a().validate){h.validate()}l.click(function(){var d=i.eq(c(i,h));if(a().validate){h.valid()}var f=d.find("input:checkbox").filter(function(){return a(this).prop("checked")}).length;if(f==0){h.closest(".container_form").find(".er_choose").hide().fadeIn("fast");setTimeout(function(){h.closest(".container_form").find(".er_choose").fadeOut("fast")},1500);return false}if(d.find(".error:visible").length==0){if(a().validate)h.validate();i.eq(c(i,h)+1).find("label.error").remove();i.eq(c(i,h)+1).find(".error").removeClass("error");e(j,i,h,"next",g.Class_Highlight);m.fadeIn("slow");h.closest(".container_quiz").find(".q_current").html(c(i,h)+2);if(b(i.eq(i.length-2),i.eq(i.length-2).closest(h))==0){l.hide();n.fadeIn("slow")}}else{h.animate({height:d.height()+"px"},200)}});m.click(function(){if(a().validate)h.validate();i.eq(c(i,h)-1).find("label.error").remove();i.eq(c(i,h)-1).find(".error").removeClass("error");e(j,i,h,"prev",g.Class_Highlight);l.fadeIn("slow");n.hide();if(b(i.eq(1),i.eq(1).closest(h))==0){m.hide()}h.closest(".container_quiz").find(".q_current").html(c(i,h))});i.find("input,select,textarea").on("keydown",function(){var b=a(this).closest(i).find("input:last,select:last,textarea:last");b.keydown(function(b){if(b.keyCode==9){if(a().validate){h.valid()}return false}})});i.find("input").on("keydown",function(a){if(a.keyCode==13){if(b(i.eq(i.length-1),i.eq(i.length-1).closest(h))==0){n.click()}else{l.click()}}});a('[rel_form="'+h.attr("id")+'"]').click(function(d){if(a().validate){h.valid()}var e=i.eq(c(i,h));if(a("#"+a(this).attr("rel")).prevAll().find(".error:visible").length==0){if(a().validate)h.validate();if(a(this).attr("rel_form")!="undefined"){i.not(e).find("label.error").remove();i.not(e).find(".error").removeClass("error");a('[rel_form="'+h.attr("id")+'"]').removeClass(g.Class_Highlight);a(this).addClass(g.Class_Highlight);d=a("#"+h.attr("id"));var f=a(this);var k=h.find("#"+a(this).attr("rel")).prevAll().length*d.outerWidth(true);d.animate({height:a("#"+a(this).attr("rel")).height()+"px"},200,function(){j.animate({left:-k},100,function(){if(b(i.eq(0),i.eq(0).closest(h))==0){m.hide();n.hide();l.fadeIn("slow")}else if(b(i.eq(i.length-1),i.eq(i.length-1).closest(h))==0){l.hide();n.fadeIn("slow");m.fadeIn("slow")}else{l.fadeIn("slow");m.fadeIn("slow");n.hide()}i.eq(c(i,h)).find("input:first").focus()})})}}else{var p=i.find(".error:visible").closest(i).attr("id");a('[rel_form="'+h.attr("id")+'"][rel="'+p+'"]').click();if(a().validate){h.valid()}}});n.click(function(){if(a().validate){h.valid()}if(i.eq(c(i,h)).find(".error:visible").length==0){h.submit()}else{h.animate({height:i.eq(c(i,h)).height()+"px"},200)}})},Rehight:function(b){var d=a(this),e=d.find('[id*="fstep_"]:visible');setTimeout(function(){d.animate({height:e.eq(c(e,d)).outerHeight(true)+"px"},200)},100)}};a.fn.StepizeForm=function(b){if(f[b]){return f[b].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof b==="object"||!b){return f.init.apply(this,arguments)}else{a.error("Method "+b+" does not exist on jQuery.steppize")}}})(jQuery)
 }
 </script>   
 <script type="text/javascript">  
 if (!jQuery().qeu_ready) {
   ;(function(a){a.qeu_ready=function(){a(".Quiz_answers_container").on("click",function(){a(this).closest("[id^='fstep_']").find(".Quiz_answers_container").removeClass("Quiz_answers_selected").find("input:checkbox").prop("checked",false);a(this).addClass("Quiz_answers_selected").find("input:checkbox").prop("checked",true)});a(".Quiz_answers_container").on({mouseenter:function(){a(this).addClass("Quiz_answers_over")},mouseleave:function(){a(this).removeClass("Quiz_answers_over")}});a(".Quiz_submit").click(function(){a(this).closest("form").validate()});a("[id^='Quizform_']").validate();a("[id^='Quizform_']").submit(function(){var b=a("#"+a(this).attr("id"));if(b.find(".data_step").length==0){var c=b.find("[id^='fstep_']").find("input:checkbox.r_ans").filter(function(){return a(this).prop("checked")}).length;var d=b.find("[id^='fstep_']").length}else{var c=b.find("[id^='fstep_']").not(":first").find("input:checkbox.r_ans").filter(function(){return a(this).prop("checked")}).length;var d=b.find("[id^='fstep_']").length-1}if(c!=d){if(b.closest(".container_quiz").find(".questions_counter").length==0){alert("You must choose at least one answer for each Question")}else{b.closest(".container_form").find(".er_choose").hide().fadeIn("fast");setTimeout(function(){b.closest(".container_form").find(".er_choose").fadeOut("fast")},1500);return false}}else{if(b.find(".data_step").length==0){var e=b.find("[id^='fstep_']").length}else{var e=b.find("[id^='fstep_']").length-1}a.ajax({type:"POST",url:"<?php echo path_abs_sfw ?>/result_quiz.php",data:b.serialize()+"&total_questions="+e,beforeSend:function(){return b.validate().form()},success:function(c){b.closest(".container_quiz").fadeOut("slow",function(){a(this).prev(".container_content_quiz").html(c).fadeIn("slow")})}})}return false});a(".container_quiz").each(function(){var b=a(this).find("[id^='fstep_']").length;a(this).find(".q_total").html("/"+b)})}})(jQuery)
  $(function(){$.qeu_ready();});
 }
 </script> 
 
<?php
           $contenut = '<div class="container_content_quiz" style="display:none"></div><div class="container_quiz" style="position:relative;">';          
           $sql = "select * from quizzes where status = 1 and code = '".$rsi['code']."'";
           $results = execute($sql);
           $rs = mysql_fetch_array($results);
           if($rs){
            //foreach($results as $result){
              if($rs['title_visible']) $contenut .= '<div class="quiz_title">'.$rs['name'].'</div>';
              if($rs['steppize']) $contenut .= '<script type="text/javascript">jQuery(function($){$("#Quizform_'.$rs['id'].'").StepizeForm({Class_Prev:"Quiz_prev",Class_Next:"Quiz_next",Class_Submit:"Quiz_submit"});});</script>';
              if(!$rs['steppize']) $contenut .= '<script type="text/javascript">jQuery(function($){$("#Quizform_'.$rs['id'].'").closest(".container_quiz").find(".questions_counter").remove();});</script>';              
              if(!$rs['steppize']) $contenut .= '<div class="questionnaire_container">';
              $contenut .= '<form id="Quizform_'.$rs['id'].'" method="post"><input name="id_quiz" type="hidden" value="'.$rs['id'].'" />';
              if($rs['random_question']){
               $sqlqu = "select * from questions where id_quiz = '".$rs['id']."' ORDER BY RAND() limit ".$rs['random_num'];
              }else{
               $sqlqu = "select * from questions where id_quiz = '".$rs['id']."' order by id asc";
              }
              $resultsqu = execute($sqlqu);  
              $step = ($rs['email_quiz']) ? 2 : 1;
              if($rs['email_quiz']){
               $contenut .= '<div id="fstep_1" class="data_step">';
               $contenut .= '<div class="Quiz_answers_container boxname">';
               $contenut .= 'Your Name<br/><input type="checkbox" checked style="display:none" /><input type="text" name="client_name" id="client_name" class="required" value="" />';
               $contenut .= '</div>';               
               $contenut .= '<div class="Quiz_answers_container boxmail">';
               $contenut .= 'Your E-mail Address<br/><input type="checkbox" checked style="display:none" /><input type="text" name="client_email" id="client_email" class="email required" value="" />';
               $contenut .= '</div>';
               $contenut .= '<br/></div>';
              }
              while ($resultqu = mysql_fetch_array($resultsqu)) {
               $contenut .= '<div id="fstep_'.$step.'"><div class="Quiz_question_container">'.$resultqu['questions'].'</div>';
                $sqlans = "select * from answers where id_question = '".$resultqu['id']."' order by id asc";
                $resultsans = execute($sqlans); 
                 while ($resultans = mysql_fetch_array($resultsans)) { 
                   $contenut .= '<div class="Quiz_answers_container"><input style="display:none" type="checkbox" name="answer_id[]" value="'.$resultans['id'].'" /><input style="display:none" type="checkbox" class="r_ans" name="answer_r[]" value="'.$resultans['proper'].'" />'.$resultans['answer'].'</div>';
                 }                
               $step++;
               $contenut .= '<br/></div>';
              }                          
            //}
            if(!$rs['steppize']) $contenut .= '<button type="submit" class="Quiz_submit" style="">Submit</button>';
            $contenut .= '</form>'; 
            if(!$rs['steppize']) $contenut .= '</div>';                            
            $contenut .= '<div class="questions_counter"><span class="q_current">1</span><span class="q_total"></span></div></div>';
            echo $contenut;            
           }
}           
?>